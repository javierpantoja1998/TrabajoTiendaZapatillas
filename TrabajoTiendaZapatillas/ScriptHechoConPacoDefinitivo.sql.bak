CREATE TABLE CATEGORIA(
	IDCATEGORIA int NOT NULL,
	NOMBRE nvarchar(50) NOT NULL,
	DESCRIPCION nvarchar(60) NULL,
 CONSTRAINT PK_CATEGORIA PRIMARY KEY CLUSTERED 
(
	IDCATEGORIA ASC
))
GO
/****** Object:  Table ZAPATILLAS    Script Date: 22/03/2023 9:47:36 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE ZAPATILLAS(
	IDZAPATILLA int NOT NULL,
	IDCATEGORIA int NOT NULL,
	NOMBRE nvarchar(50) NULL,
	TALLA decimal(10, 2) NOT NULL,
	UNIDADESTOCK int NOT NULL,
	DESCRIPCION nvarchar(50) NOT NULL,
	IMAGEN nvarchar(100) NULL,
	PRECIO decimal(10, 2) NULL,
 CONSTRAINT PK_ZAPATILLAS PRIMARY KEY CLUSTERED 
(
	IDZAPATILLA ASC
))
GO
/****** Object:  View VISTA_ZAPATILLAS_CATEGORIA    Script Date: 22/03/2023 9:47:36 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW VISTA_ZAPATILLAS_CATEGORIA
AS

SELECT Z.IDZAPATILLA, Z.NOMBRE, Z.TALLA, Z.UNIDADESTOCK, Z.DESCRIPCION, Z.IMAGEN, Z.PRECIO, C.NOMBRE AS NOMBRECATEGORIA FROM ZAPATILLAS Z
INNER JOIN CATEGORIA C
ON Z.IDCATEGORIA = C.IDCATEGORIA
GO
/****** Object:  Table USUARIOS    Script Date: 22/03/2023 9:47:36 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE USUARIOS(
	IDUSUARIO int NOT NULL,
	NOMBRE nvarchar(50) NOT NULL,
	DNI nvarchar(9) NOT NULL,
	DIRECCION nvarchar(50) NOT NULL,
	TELEFONO nvarchar(50) NOT NULL,
	EMAIL nvarchar(60) NOT NULL,
	SALT nvarchar(50) NULL,
	PASSWORD varbinary(max) NULL,
 CONSTRAINT PK_USUARIOS PRIMARY KEY CLUSTERED 
(
	IDUSUARIO ASC
)) TEXTIMAGE_
GO
/****** Object:  Table VENTAS    Script Date: 22/03/2023 9:47:36 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE VENTAS(
	IDVENTA int NOT NULL,
	IDZAPATILLA int NOT NULL,
	IDUSUARIO int NOT NULL,
	NUMEROCOMPROBANTE nvarchar(50) NULL,
	FECHA datetime NULL,
	IMPUESTO int NULL,
	TOTAL int NULL,
 CONSTRAINT PK_VENTAS PRIMARY KEY CLUSTERED 
(
	IDVENTA ASC
))
GO
INSERT CATEGORIA (IDCATEGORIA, NOMBRE, DESCRIPCION) VALUES (1, N'Basketball', N'Zapatillas destinadas a practicar basket')
INSERT CATEGORIA (IDCATEGORIA, NOMBRE, DESCRIPCION) VALUES (2, N'Futbol', N'Zapatillas destinadas para practicar futbol')
INSERT CATEGORIA (IDCATEGORIA, NOMBRE, DESCRIPCION) VALUES (3, N'Skate', N'Zapatillas destinadas para practicar skate')
INSERT CATEGORIA (IDCATEGORIA, NOMBRE, DESCRIPCION) VALUES (4, N'Premium', N'Las zapatillas de más alta gama para los hype-beast')
GO
INSERT USUARIOS (IDUSUARIO, NOMBRE, DNI, DIRECCION, TELEFONO, EMAIL, SALT, PASSWORD) VALUES (1, N'Javier Pantoja', N'2323241L', N'Calle Jupiter 23', N'2324242', N'javier@admin.com', NULL, NULL)
INSERT USUARIOS (IDUSUARIO, NOMBRE, DNI, DIRECCION, TELEFONO, EMAIL, SALT, PASSWORD) VALUES (2, N'Juan Costilla', N'2323212P', N'Avenida America 23', N'6823287', N'Juanito@correo.es', NULL, NULL)
INSERT USUARIOS (IDUSUARIO, NOMBRE, DNI, DIRECCION, TELEFONO, EMAIL, SALT, PASSWORD) VALUES (3, N'Sergio Fantasci', N'0832392A', N'Avenida Mar Egeo 2', N'8349934', N'SergiF@correo.es', NULL, NULL)
INSERT USUARIOS (IDUSUARIO, NOMBRE, DNI, DIRECCION, TELEFONO, EMAIL, SALT, PASSWORD) VALUES (4, N'Irene Iwi', N'2136283K', N'Calle Monroe', N'7382228', N'iwi@correo.es', NULL, NULL)
INSERT USUARIOS (IDUSUARIO, NOMBRE, DNI, DIRECCION, TELEFONO, EMAIL, SALT, PASSWORD) VALUES (5, N'Luka Donx', N'563273', N'Calle Nba', N'67323223', N'luka@mavs.nba', N'jsadk283', 0x63006F006E00740072006100)
INSERT USUARIOS (IDUSUARIO, NOMBRE, DNI, DIRECCION, TELEFONO, EMAIL, SALT, PASSWORD) VALUES (6, N'Javi', N'123456', N'calle falsa', N'12345', N'cientificodebanco@gmail.com', N'ëj°8áÈª+tî?+ö¤Õå°^¬Ý«;ÑDçCõIîÞp±ÜyîXs×ýÚ', 0xB71408D29B9D0638F81BF3560B9CD946B85442EA0427FE1E1F11862A37D41ADC65946D04B2FB2F55CF2F59BADD7411CD753817A84009350BC012A5A5FEF9F77E)
INSERT USUARIOS (IDUSUARIO, NOMBRE, DNI, DIRECCION, TELEFONO, EMAIL, SALT, PASSWORD) VALUES (7, N'LITOS', N'12345674', N'Calle Alfonso Perez', N'802332', N'litos@litos.es', N'´*t
Ö9êüIéÌ¨¶Èe¾''°ì¼÷·"Aïb6¹ÅLëæz¼ËSDù+Ù`', 0x2E90A50E9688456FB5411876E28516B92130DDE663AFFB6AEB7AAE393548C41E581BE7022B42DDED95BC3CC7FC0B0B1A8968E7EBAE2759869A92F02068E9D985)
GO
INSERT VENTAS (IDVENTA, IDZAPATILLA, IDUSUARIO, NUMEROCOMPROBANTE, FECHA, IMPUESTO, TOTAL) VALUES (1, 1, 2, N'111', CAST(N'2023-02-12T00:00:00.000' AS DateTime), 40, 139)
INSERT VENTAS (IDVENTA, IDZAPATILLA, IDUSUARIO, NUMEROCOMPROBANTE, FECHA, IMPUESTO, TOTAL) VALUES (2, 2, 3, N'222', CAST(N'2022-12-22T00:00:00.000' AS DateTime), 30, 150)
INSERT VENTAS (IDVENTA, IDZAPATILLA, IDUSUARIO, NUMEROCOMPROBANTE, FECHA, IMPUESTO, TOTAL) VALUES (3, 3, 4, N'333', CAST(N'2021-03-24T00:00:00.000' AS DateTime), 40, 110)
GO
INSERT ZAPATILLAS (IDZAPATILLA, IDCATEGORIA, NOMBRE, TALLA, UNIDADESTOCK, DESCRIPCION, IMAGEN, PRECIO) VALUES (1, 1, N' UNDER ARMOUR LOCKDOWN 6', CAST(45.00 AS Decimal(10, 2)), 30, N'Zapatillas UnderArmor', N'https://underarmourcol.vtexassets.com/arquivos/ids/514259/3025616-600_RE9_2.png?v=638007680475200000', CAST(99.99 AS Decimal(10, 2)))
INSERT ZAPATILLAS (IDZAPATILLA, IDCATEGORIA, NOMBRE, TALLA, UNIDADESTOCK, DESCRIPCION, IMAGEN, PRECIO) VALUES (2, 1, N'NIKE PERFORMANCE KD 4', CAST(45.00 AS Decimal(10, 2)), 45, N'Zapatillas Nike KD, gama alta', N'https://static.runnea.com/images/prices/sneakers-nike-air-jordan-legacy-312-nike-10013733638.png', CAST(120.00 AS Decimal(10, 2)))
INSERT ZAPATILLAS (IDZAPATILLA, IDCATEGORIA, NOMBRE, TALLA, UNIDADESTOCK, DESCRIPCION, IMAGEN, PRECIO) VALUES (3, 1, N'Jordan Whynot? Zero.2', CAST(43.00 AS Decimal(10, 2)), 70, N'Zapatillas Jordan usadas por Russel WestBrook', N'https://inussualbasket.com/wp-content/uploads/2020/03/cd3003-003-parte-izquierda.jpg', CAST(72.50 AS Decimal(10, 2)))
INSERT ZAPATILLAS (IDZAPATILLA, IDCATEGORIA, NOMBRE, TALLA, UNIDADESTOCK, DESCRIPCION, IMAGEN, PRECIO) VALUES (4, 1, N'Adidas Dame 5 ', CAST(44.50 AS Decimal(10, 2)), 100, N'Zapatillas Adidas edicion Damian Lillard', N'https://www.madbasket.com/10878/adidas-dame-8-j-chinese-new-year.jpg', CAST(85.70 AS Decimal(10, 2)))
INSERT ZAPATILLAS (IDZAPATILLA, IDCATEGORIA, NOMBRE, TALLA, UNIDADESTOCK, DESCRIPCION, IMAGEN, PRECIO) VALUES (5, 2, N'Adidas Predator', CAST(42.50 AS Decimal(10, 2)), 20, N'Una de las botas más iconicas de esta epoca', N'https://soccerstorecore.azureedge.net/0-0-116557.png', CAST(70.00 AS Decimal(10, 2)))
INSERT ZAPATILLAS (IDZAPATILLA, IDCATEGORIA, NOMBRE, TALLA, UNIDADESTOCK, DESCRIPCION, IMAGEN, PRECIO) VALUES (6, 2, N'Nike Mercurial Prototype', CAST(41.00 AS Decimal(10, 2)), 6, N'Un clasico del modernismo futbolístico', N'https://storage.googleapis.com/ssr_mx/products/688fd87ba77c0a202eb0b01691f88abb.jpg', CAST(130.00 AS Decimal(10, 2)))
INSERT ZAPATILLAS (IDZAPATILLA, IDCATEGORIA, NOMBRE, TALLA, UNIDADESTOCK, DESCRIPCION, IMAGEN, PRECIO) VALUES (7, 2, N'Nike Performance 3', CAST(42.00 AS Decimal(10, 2)), 200, N'Una de las botas más usadas  hoy en dia', N'https://www.noticiasdevaldemoro.es/wp-content/uploads/2022/11/botas-futbol-nike-506auk.png', CAST(55.60 AS Decimal(10, 2)))
INSERT ZAPATILLAS (IDZAPATILLA, IDCATEGORIA, NOMBRE, TALLA, UNIDADESTOCK, DESCRIPCION, IMAGEN, PRECIO) VALUES (8, 2, N'Puma Future Match', CAST(43.50 AS Decimal(10, 2)), 45, N'El mejor modelo actualmente de puma', N'https://soccerstorecore.azureedge.net/0-0-131251.png', CAST(79.90 AS Decimal(10, 2)))
INSERT ZAPATILLAS (IDZAPATILLA, IDCATEGORIA, NOMBRE, TALLA, UNIDADESTOCK, DESCRIPCION, IMAGEN, PRECIO) VALUES (9, 3, N'Vans OldSkul', CAST(42.00 AS Decimal(10, 2)), 230, N'Las zapatillas de los skaters ', N'https://www.43einhalb.com/media/324252/w/1080/h/1080/n/vans-vn0a4bw3ks71-old-skool-36-d-1.png', CAST(50.00 AS Decimal(10, 2)))
INSERT ZAPATILLAS (IDZAPATILLA, IDCATEGORIA, NOMBRE, TALLA, UNIDADESTOCK, DESCRIPCION, IMAGEN, PRECIO) VALUES (10, 3, N'DC SHOES PURE', CAST(43.50 AS Decimal(10, 2)), 102, N'Un clasico, no te las pierdas', N'https://ethletic.com/wp-content/uploads/2023/03/65000_247247_00288.png', CAST(455.00 AS Decimal(10, 2)))
INSERT ZAPATILLAS (IDZAPATILLA, IDCATEGORIA, NOMBRE, TALLA, UNIDADESTOCK, DESCRIPCION, IMAGEN, PRECIO) VALUES (11, 3, N'Nike SB 3', CAST(42.00 AS Decimal(10, 2)), 60, N'Comodas, bonitas y perfectas para hacer skate', N'https://static.runnea.com/images/201708/nike_janoski_negro_grande.png?0', CAST(63.00 AS Decimal(10, 2)))
INSERT ZAPATILLAS (IDZAPATILLA, IDCATEGORIA, NOMBRE, TALLA, UNIDADESTOCK, DESCRIPCION, IMAGEN, PRECIO) VALUES (12, 3, N'Nike Dunk Low', CAST(43.00 AS Decimal(10, 2)), 23, N'Una de las zapas mas usadas por los skaters', N'https://static.sneakerjagers.com/p/hmF1LB7bhYam7eULsb0psSLXdlVLMu0SGJO0JXJb.png', CAST(110.00 AS Decimal(10, 2)))
INSERT ZAPATILLAS (IDZAPATILLA, IDCATEGORIA, NOMBRE, TALLA, UNIDADESTOCK, DESCRIPCION, IMAGEN, PRECIO) VALUES (13, 4, N'Jordan 1 MidNight', CAST(44.00 AS Decimal(10, 2)), 20, N'Dejate enamorar por esta maravilla', N'https://cdn.restocks.net/cdn-cgi/image/width=1000/storage/images/products/DD9315-104/1.png', CAST(200.00 AS Decimal(10, 2)))
INSERT ZAPATILLAS (IDZAPATILLA, IDCATEGORIA, NOMBRE, TALLA, UNIDADESTOCK, DESCRIPCION, IMAGEN, PRECIO) VALUES (14, 4, N'Jordan 4 Travis Scott', CAST(42.00 AS Decimal(10, 2)), 2, N'No hace falta descripcion para estas', N'https://platano-sneakers.es/wp-content/uploads/2022/09/air-jordan-4-retro-military-black-1-1000.png', CAST(500.00 AS Decimal(10, 2)))
INSERT ZAPATILLAS (IDZAPATILLA, IDCATEGORIA, NOMBRE, TALLA, UNIDADESTOCK, DESCRIPCION, IMAGEN, PRECIO) VALUES (15, 4, N'Nike A1 Cactus Jack', CAST(41.00 AS Decimal(10, 2)), 4, N'El hype hecho zapatilla', N'https://www.logistun.es/wp-content/uploads/2022/10/nike-jordan-1-576gff.png', CAST(349.99 AS Decimal(10, 2)))
INSERT ZAPATILLAS (IDZAPATILLA, IDCATEGORIA, NOMBRE, TALLA, UNIDADESTOCK, DESCRIPCION, IMAGEN, PRECIO) VALUES (16, 4, N'Adidas Yeezy 10', CAST(43.50 AS Decimal(10, 2)), 10, N'Adquiere estas zapatillas historicas', N'https://platano-sneakers.es/wp-content/uploads/2022/10/adidas-yeezy-boost-350-v2-sulfur-1-1000.png', CAST(593.90 AS Decimal(10, 2)))
GO
ALTER TABLE VENTAS  WITH CHECK ADD  CONSTRAINT FK_VENTAS_USUARIOS FOREIGN KEY(IDUSUARIO)
REFERENCES USUARIOS (IDUSUARIO)
GO
ALTER TABLE VENTAS CHECK CONSTRAINT FK_VENTAS_USUARIOS
GO
ALTER TABLE VENTAS  WITH CHECK ADD  CONSTRAINT FK_VENTAS_ZAPATILLAS FOREIGN KEY(IDZAPATILLA)
REFERENCES ZAPATILLAS (IDZAPATILLA)
GO
ALTER TABLE VENTAS CHECK CONSTRAINT FK_VENTAS_ZAPATILLAS
GO
ALTER TABLE ZAPATILLAS  WITH CHECK ADD  CONSTRAINT FK_ZAPATILLAS_CATEGORIA FOREIGN KEY(IDCATEGORIA)
REFERENCES CATEGORIA (IDCATEGORIA)
GO
ALTER TABLE ZAPATILLAS CHECK CONSTRAINT FK_ZAPATILLAS_CATEGORIA
GO
/****** Object:  StoredProcedure SP_GETZAPATILLASID    Script Date: 22/03/2023 9:47:36 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE SP_GETZAPATILLASID(@IDZAPATILLA INT)
AS
	SELECT NOMBRE FROM ZAPATILLAS WHERE IDZAPATILLA = @IDZAPATILLA
GO
